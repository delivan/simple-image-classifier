{"code":"import * as tslib_1 from \"tslib\";\r\nimport * as device_util from './device_util';\r\nimport { doc } from './doc';\r\nimport { Engine } from './engine';\r\nimport * as util from './util';\r\nexport var Type;\r\n(function (Type) {\r\n    Type[Type[\"NUMBER\"] = 0] = \"NUMBER\";\r\n    Type[Type[\"BOOLEAN\"] = 1] = \"BOOLEAN\";\r\n    Type[Type[\"STRING\"] = 2] = \"STRING\";\r\n})(Type || (Type = {}));\r\nexport var URL_PROPERTIES = [\r\n    { name: 'DEBUG', type: Type.BOOLEAN }, { name: 'IS_BROWSER', type: Type.BOOLEAN },\r\n    { name: 'WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION', type: Type.NUMBER },\r\n    { name: 'WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE', type: Type.BOOLEAN },\r\n    { name: 'WEBGL_VERSION', type: Type.NUMBER },\r\n    { name: 'WEBGL_FLOAT_TEXTURE_ENABLED', type: Type.BOOLEAN }, {\r\n        name: 'WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED',\r\n        type: Type.BOOLEAN\r\n    },\r\n    { name: 'BACKEND', type: Type.STRING }\r\n];\r\nfunction hasExtension(gl, extensionName) {\r\n    var ext = gl.getExtension(extensionName);\r\n    return ext != null;\r\n}\r\nfunction getWebGLRenderingContext(webGLVersion) {\r\n    if (webGLVersion === 0) {\r\n        throw new Error('Cannot get WebGL rendering context, WebGL is disabled.');\r\n    }\r\n    var tempCanvas = document.createElement('canvas');\r\n    if (webGLVersion === 1) {\r\n        return (tempCanvas.getContext('webgl') ||\r\n            tempCanvas.getContext('experimental-webgl'));\r\n    }\r\n    return tempCanvas.getContext('webgl2');\r\n}\r\nfunction loseContext(gl) {\r\n    if (gl != null) {\r\n        var loseContextExtension = gl.getExtension('WEBGL_lose_context');\r\n        if (loseContextExtension == null) {\r\n            throw new Error('Extension WEBGL_lose_context not supported on this browser.');\r\n        }\r\n        loseContextExtension.loseContext();\r\n    }\r\n}\r\nfunction isWebGLVersionEnabled(webGLVersion) {\r\n    var gl = getWebGLRenderingContext(webGLVersion);\r\n    if (gl != null) {\r\n        loseContext(gl);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction getWebGLDisjointQueryTimerVersion(webGLVersion) {\r\n    if (webGLVersion === 0) {\r\n        return 0;\r\n    }\r\n    var queryTimerVersion;\r\n    var gl = getWebGLRenderingContext(webGLVersion);\r\n    if (hasExtension(gl, 'EXT_disjoint_timer_query_webgl2') &&\r\n        webGLVersion === 2) {\r\n        queryTimerVersion = 2;\r\n    }\r\n    else if (hasExtension(gl, 'EXT_disjoint_timer_query')) {\r\n        queryTimerVersion = 1;\r\n    }\r\n    else {\r\n        queryTimerVersion = 0;\r\n    }\r\n    if (gl != null) {\r\n        loseContext(gl);\r\n    }\r\n    return queryTimerVersion;\r\n}\r\nfunction isFloatTextureReadPixelsEnabled(webGLVersion) {\r\n    if (webGLVersion === 0) {\r\n        return false;\r\n    }\r\n    var gl = getWebGLRenderingContext(webGLVersion);\r\n    if (webGLVersion === 1) {\r\n        if (!hasExtension(gl, 'OES_texture_float')) {\r\n            return false;\r\n        }\r\n    }\r\n    else {\r\n        if (!hasExtension(gl, 'EXT_color_buffer_float')) {\r\n            return false;\r\n        }\r\n    }\r\n    var frameBuffer = gl.createFramebuffer();\r\n    var texture = gl.createTexture();\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    var internalFormat = webGLVersion === 2 ? gl.RGBA32F : gl.RGBA;\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, 1, 1, 0, gl.RGBA, gl.FLOAT, null);\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\r\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\r\n    var frameBufferComplete = (gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE);\r\n    gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.FLOAT, new Float32Array(4));\r\n    var readPixelsNoError = gl.getError() === gl.NO_ERROR;\r\n    loseContext(gl);\r\n    return frameBufferComplete && readPixelsNoError;\r\n}\r\nfunction isWebGLGetBufferSubDataAsyncExtensionEnabled(webGLVersion) {\r\n    if (webGLVersion > 0) {\r\n        return false;\r\n    }\r\n    if (webGLVersion !== 2) {\r\n        return false;\r\n    }\r\n    var gl = getWebGLRenderingContext(webGLVersion);\r\n    var isEnabled = hasExtension(gl, 'WEBGL_get_buffer_sub_data_async');\r\n    loseContext(gl);\r\n    return isEnabled;\r\n}\r\nvar Environment = (function () {\r\n    function Environment(features) {\r\n        this.features = {};\r\n        this.registry = {};\r\n        if (features != null) {\r\n            this.features = features;\r\n        }\r\n        if (this.get('DEBUG')) {\r\n            console.warn('Debugging mode is ON. The output of every math call will ' +\r\n                'be downloaded to CPU and checked for NaNs. ' +\r\n                'This significantly impacts performance.');\r\n        }\r\n    }\r\n    Environment.setBackend = function (backendType, safeMode) {\r\n        if (safeMode === void 0) { safeMode = false; }\r\n        if (!(backendType in ENV.registry)) {\r\n            throw new Error(\"Backend type '\" + backendType + \"' not found in registry\");\r\n        }\r\n        ENV.initBackend(backendType, safeMode);\r\n    };\r\n    Environment.getBackend = function () {\r\n        ENV.initDefaultBackend();\r\n        return ENV.currentBackend;\r\n    };\r\n    Environment.disposeVariables = function () {\r\n        ENV.engine.disposeVariables();\r\n    };\r\n    Environment.memory = function () {\r\n        return ENV.engine.memory();\r\n    };\r\n    Environment.prototype.get = function (feature) {\r\n        if (feature in this.features) {\r\n            return this.features[feature];\r\n        }\r\n        this.features[feature] = this.evaluateFeature(feature);\r\n        return this.features[feature];\r\n    };\r\n    Environment.prototype.set = function (feature, value) {\r\n        this.features[feature] = value;\r\n    };\r\n    Environment.prototype.getBestBackendType = function () {\r\n        var _this = this;\r\n        if (Object.keys(this.registry).length === 0) {\r\n            throw new Error('No backend found in registry.');\r\n        }\r\n        var sortedBackends = Object.keys(this.registry)\r\n            .map(function (name) {\r\n            return { name: name, entry: _this.registry[name] };\r\n        })\r\n            .sort(function (a, b) {\r\n            return b.entry.priority - a.entry.priority;\r\n        });\r\n        return sortedBackends[0].name;\r\n    };\r\n    Environment.prototype.evaluateFeature = function (feature) {\r\n        if (feature === 'DEBUG') {\r\n            return false;\r\n        }\r\n        else if (feature === 'IS_BROWSER') {\r\n            return typeof window !== 'undefined';\r\n        }\r\n        else if (feature === 'BACKEND') {\r\n            return this.getBestBackendType();\r\n        }\r\n        else if (feature === 'WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION') {\r\n            var webGLVersion = this.get('WEBGL_VERSION');\r\n            if (webGLVersion === 0) {\r\n                return 0;\r\n            }\r\n            return getWebGLDisjointQueryTimerVersion(webGLVersion);\r\n        }\r\n        else if (feature === 'WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE') {\r\n            return this.get('WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION') > 0 &&\r\n                !device_util.isMobile();\r\n        }\r\n        else if (feature === 'WEBGL_VERSION') {\r\n            if (isWebGLVersionEnabled(2)) {\r\n                return 2;\r\n            }\r\n            else if (isWebGLVersionEnabled(1)) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        }\r\n        else if (feature === 'WEBGL_FLOAT_TEXTURE_ENABLED') {\r\n            return isFloatTextureReadPixelsEnabled(this.get('WEBGL_VERSION'));\r\n        }\r\n        else if (feature === 'WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED') {\r\n            return isWebGLGetBufferSubDataAsyncExtensionEnabled(this.get('WEBGL_VERSION'));\r\n        }\r\n        throw new Error(\"Unknown feature \" + feature + \".\");\r\n    };\r\n    Environment.prototype.setFeatures = function (features) {\r\n        this.features = features;\r\n    };\r\n    Environment.prototype.reset = function () {\r\n        this.features = getFeaturesFromURL();\r\n        if (this.globalEngine != null) {\r\n            this.globalEngine.dispose();\r\n            this.globalEngine = null;\r\n        }\r\n    };\r\n    Environment.prototype.initBackend = function (backendType, safeMode) {\r\n        if (safeMode === void 0) { safeMode = false; }\r\n        this.currentBackend = backendType;\r\n        if (this.globalEngine != null) {\r\n            this.globalEngine.dispose();\r\n        }\r\n        var backend = ENV.findBackend(backendType);\r\n        this.globalEngine = new Engine(backend, safeMode);\r\n    };\r\n    Environment.prototype.findBackend = function (name) {\r\n        if (!(name in this.registry)) {\r\n            return null;\r\n        }\r\n        return this.registry[name].backend;\r\n    };\r\n    Environment.prototype.registerBackend = function (name, factory, priority) {\r\n        if (priority === void 0) { priority = 1; }\r\n        if (name in this.registry) {\r\n            console.warn(name + \" backend was already registered\");\r\n        }\r\n        try {\r\n            var backend = factory();\r\n            this.registry[name] = { backend: backend, priority: priority };\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            console.warn(err.message);\r\n            return false;\r\n        }\r\n    };\r\n    Environment.prototype.removeBackend = function (name) {\r\n        if (!(name in this.registry)) {\r\n            throw new Error(name + \" backend not found in registry\");\r\n        }\r\n        this.registry[name].backend.dispose();\r\n        delete this.registry[name];\r\n    };\r\n    Object.defineProperty(Environment.prototype, \"engine\", {\r\n        get: function () {\r\n            this.initDefaultBackend();\r\n            return this.globalEngine;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Environment.prototype.initDefaultBackend = function () {\r\n        if (this.globalEngine == null) {\r\n            this.initBackend(ENV.get('BACKEND'), false);\r\n        }\r\n    };\r\n    tslib_1.__decorate([\r\n        doc({ heading: 'Environment' })\r\n    ], Environment, \"setBackend\", null);\r\n    tslib_1.__decorate([\r\n        doc({ heading: 'Environment' })\r\n    ], Environment, \"getBackend\", null);\r\n    tslib_1.__decorate([\r\n        doc({ heading: 'Environment' })\r\n    ], Environment, \"disposeVariables\", null);\r\n    tslib_1.__decorate([\r\n        doc({ heading: 'Performance', subheading: 'Memory' })\r\n    ], Environment, \"memory\", null);\r\n    return Environment;\r\n}());\r\nexport { Environment };\r\nvar TENSORFLOWJS_FLAGS_PREFIX = 'tfjsflags';\r\nfunction getFeaturesFromURL() {\r\n    var features = {};\r\n    if (typeof window === 'undefined' || typeof window.location === 'undefined') {\r\n        return features;\r\n    }\r\n    var urlParams = util.getQueryParams(window.location.search);\r\n    if (TENSORFLOWJS_FLAGS_PREFIX in urlParams) {\r\n        var urlFlags_1 = {};\r\n        var keyValues = urlParams[TENSORFLOWJS_FLAGS_PREFIX].split(',');\r\n        keyValues.forEach(function (keyValue) {\r\n            var _a = keyValue.split(':'), key = _a[0], value = _a[1];\r\n            urlFlags_1[key] = value;\r\n        });\r\n        URL_PROPERTIES.forEach(function (urlProperty) {\r\n            if (urlProperty.name in urlFlags_1) {\r\n                console.log(\"Setting feature override from URL \" + urlProperty.name + \": \" +\r\n                    (\"\" + urlFlags_1[urlProperty.name]));\r\n                if (urlProperty.type === Type.NUMBER) {\r\n                    features[urlProperty.name] = +urlFlags_1[urlProperty.name];\r\n                }\r\n                else if (urlProperty.type === Type.BOOLEAN) {\r\n                    features[urlProperty.name] = urlFlags_1[urlProperty.name] === 'true';\r\n                }\r\n                else if (urlProperty.type === Type.STRING) {\r\n                    features[urlProperty.name] = urlFlags_1[urlProperty.name];\r\n                }\r\n                else {\r\n                    console.warn(\"Unknown URL param: \" + urlProperty.name + \".\");\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return features;\r\n}\r\nfunction getGlobalNamespace() {\r\n    var ns;\r\n    if (typeof (window) !== 'undefined') {\r\n        ns = window;\r\n    }\r\n    else if (typeof (global) !== 'undefined') {\r\n        ns = global;\r\n    }\r\n    else {\r\n        throw new Error('Could not find a global object');\r\n    }\r\n    return ns;\r\n}\r\nfunction getOrMakeEnvironment() {\r\n    var ns = getGlobalNamespace();\r\n    ns.ENV = ns.ENV || new Environment(getFeaturesFromURL());\r\n    return ns.ENV;\r\n}\r\nexport var ENV = getOrMakeEnvironment();\r\n//# sourceMappingURL=environment.js.map","map":"{\"version\":3,\"file\":\"environment.js\",\"sourceRoot\":\"\",\"sources\":[\"src/environment.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/usr/local/google/home/nsthorat/deeplearnjs-clients/rollup/tfjs-core/environment.d.ts","text":"import { Engine, MemoryInfo } from './engine';\r\nimport { KernelBackend } from './kernels/backend';\r\nexport declare enum Type {\r\n    NUMBER = 0,\r\n    BOOLEAN = 1,\r\n    STRING = 2,\r\n}\r\nexport interface Features {\r\n    'DEBUG'?: boolean;\r\n    'IS_BROWSER'?: boolean;\r\n    'WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION'?: number;\r\n    'WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE'?: boolean;\r\n    'WEBGL_VERSION'?: number;\r\n    'WEBGL_FLOAT_TEXTURE_ENABLED'?: boolean;\r\n    'WEBGL_GET_BUFFER_SUB_DATA_ASYNC_EXTENSION_ENABLED'?: boolean;\r\n    'BACKEND'?: string;\r\n}\r\nexport declare const URL_PROPERTIES: URLProperty[];\r\nexport interface URLProperty {\r\n    name: keyof Features;\r\n    type: Type;\r\n}\r\nexport declare class Environment {\r\n    private features;\r\n    private globalEngine;\r\n    private registry;\r\n    private currentBackend;\r\n    constructor(features?: Features);\r\n    static setBackend(backendType: string, safeMode?: boolean): void;\r\n    static getBackend(): string;\r\n    static disposeVariables(): void;\r\n    static memory(): MemoryInfo;\r\n    get<K extends keyof Features>(feature: K): Features[K];\r\n    set<K extends keyof Features>(feature: K, value: Features[K]): void;\r\n    getBestBackendType(): string;\r\n    private evaluateFeature<K>(feature);\r\n    setFeatures(features: Features): void;\r\n    reset(): void;\r\n    private initBackend(backendType?, safeMode?);\r\n    findBackend(name: string): KernelBackend;\r\n    registerBackend(name: string, factory: () => KernelBackend, priority?: number): boolean;\r\n    removeBackend(name: string): void;\r\n    readonly engine: Engine;\r\n    private initDefaultBackend();\r\n}\r\nexport declare let ENV: Environment;\r\n"}}
