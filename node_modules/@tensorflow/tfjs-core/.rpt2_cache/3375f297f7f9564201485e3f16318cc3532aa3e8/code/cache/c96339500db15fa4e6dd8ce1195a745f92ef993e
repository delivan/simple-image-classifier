{"code":"import * as tslib_1 from \"tslib\";\r\nimport { doc } from '../doc';\r\nimport { ENV } from '../environment';\r\nimport * as util from '../util';\r\nimport { parseAxisParam } from './axis_util';\r\nimport * as concat_util from './concat_util';\r\nimport { operation } from './operation';\r\nvar ConcatOps = (function () {\r\n    function ConcatOps() {\r\n    }\r\n    ConcatOps.concat1d = function (tensors) {\r\n        return ConcatOps.concat(tensors, 0);\r\n    };\r\n    ConcatOps.concat2d = function (tensors, axis) {\r\n        return ConcatOps.concat(tensors, axis);\r\n    };\r\n    ConcatOps.concat3d = function (tensors, axis) {\r\n        return ConcatOps.concat(tensors, axis);\r\n    };\r\n    ConcatOps.concat4d = function (tensors, axis) {\r\n        return ConcatOps.concat(tensors, axis);\r\n    };\r\n    ConcatOps.concat = function (tensors, axis) {\r\n        if (axis === void 0) { axis = 0; }\r\n        util.assert(tensors.length >= 1, 'Pass at least one tensor to concat');\r\n        util.assertArgumentsAreTensors({ tensors: tensors }, 'concat');\r\n        var result = tensors[0];\r\n        if (tensors.length === 1) {\r\n            return result;\r\n        }\r\n        var axes = parseAxisParam(axis, result.shape);\r\n        for (var i = 1; i < tensors.length; ++i) {\r\n            result = concat2Tensors(result, tensors[i], axes[0]);\r\n        }\r\n        return result;\r\n    };\r\n    tslib_1.__decorate([\r\n        doc({ heading: 'Tensors', subheading: 'Slicing and Joining' }),\r\n        operation\r\n    ], ConcatOps, \"concat\", null);\r\n    return ConcatOps;\r\n}());\r\nexport { ConcatOps };\r\nfunction concat2Tensors(a, b, axis) {\r\n    concat_util.assertParams(a.shape, b.shape, axis);\r\n    var outShape = concat_util.computeOutShape(a.shape, b.shape, axis);\r\n    var a2D = a.as2D(-1, util.sizeFromShape(a.shape.slice(axis)));\r\n    var b2D = b.as2D(-1, util.sizeFromShape(b.shape.slice(axis)));\r\n    var _a = concat_util.computeGradientSliceShapes(a2D.shape, b2D.shape), aBegin = _a.aBegin, aSize = _a.aSize, bBegin = _a.bBegin, bSize = _a.bSize;\r\n    var der = function (dy) {\r\n        return { a: function () { return dy.slice(aBegin, aSize); }, b: function () { return dy.slice(bBegin, bSize); } };\r\n    };\r\n    var res = ENV.engine.runKernel(function (backend) { return backend.concat(a2D, b2D); }, { a: a2D, b: b2D }, der);\r\n    return res.reshape(outShape);\r\n}\r\n//# sourceMappingURL=concat.js.map","map":"{\"version\":3,\"file\":\"concat.js\",\"sourceRoot\":\"\",\"sources\":[\"../src/ops/concat.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/usr/local/google/home/nsthorat/deeplearnjs-clients/rollup/tfjs-core/ops/concat.d.ts","text":"import { Tensor, Tensor1D, Tensor2D, Tensor3D, Tensor4D } from '../tensor';\r\nexport declare class ConcatOps {\r\n    static concat1d(tensors: Tensor1D[]): Tensor1D;\r\n    static concat2d(tensors: Tensor2D[], axis: number): Tensor2D;\r\n    static concat3d(tensors: Tensor3D[], axis: number): Tensor3D;\r\n    static concat4d(tensors: Tensor4D[], axis: number): Tensor4D;\r\n    static concat<T extends Tensor>(tensors: T[], axis?: number): T;\r\n}\r\n"}}
